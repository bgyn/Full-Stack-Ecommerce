<nav class="bg-dark text-white vh-100 position-fixed p-3" style="width: 250px">
  <h3 class="text-center">Admin Panel</h3>

  <a href="/users" class="d-block text-white p-2 text-decoration-none">Users</a>

  <!-- Products Menu -->
  <div>
    <a
      class="d-block text-white p-2 text-decoration-none"
      data-bs-toggle="collapse"
      href="#productsMenu"
      role="button"
      aria-expanded="false"
      aria-controls="productsMenu"
      id="productsMenuToggle"
    >
      Products
    </a>
    <div class="collapse ps-3" id="productsMenu">
      <a href="/products" class="d-block text-white p-2 text-decoration-none"
        >All Products</a
      >
      <a
        href="/products/add"
        class="d-block text-white p-2 text-decoration-none"
        >Add Product</a
      >
    </div>
  </div>

  <!-- Categories Menu -->
  <div>
    <a
      class="d-block text-white p-2 text-decoration-none"
      data-bs-toggle="collapse"
      href="#categoriesMenu"
      role="button"
      aria-expanded="false"
      aria-controls="categoriesMenu"
      id="categoriesMenuToggle"
    >
      Categories
    </a>
    <div class="collapse ps-3" id="categoriesMenu">
      <a href="/category" class="d-block text-white p-2 text-decoration-none"
        >All Categories</a
      >
      <a
        href="/subCategory/add"
        class="d-block text-white p-2 text-decoration-none"
        >Add Sub Categories</a
      >
    </div>
  </div>

  <a href="/payments" class="d-block text-white p-2 text-decoration-none"
    >Payments</a
  >

  <form action="/logout" method="POST" class="mt-3 text-center">
    <button type="submit" class="btn btn-danger w-75">Logout</button>
  </form>
</nav>

<!-- Bootstrap JS (Required for collapse functionality) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Function to manage submenu state
    function handleSubMenu(menuId, toggleId, storageKey) {
      const menu = document.getElementById(menuId);
      const toggle = document.getElementById(toggleId);

      if (localStorage.getItem(storageKey) === "true") {
        const collapseInstance = new bootstrap.Collapse(menu, {
          toggle: false,
        });
        collapseInstance.show();
      } else {
        menu.classList.remove("show");
      }

      toggle.addEventListener("click", function () {
        const isExpanded = menu.classList.contains("show");
        localStorage.setItem(storageKey, isExpanded ? "false" : "true");
      });
    }

    // Initialize menus
    handleSubMenu("productsMenu", "productsMenuToggle", "productsMenuOpen");
    handleSubMenu(
      "categoriesMenu",
      "categoriesMenuToggle",
      "categoriesMenuOpen"
    );
  });
</script>
